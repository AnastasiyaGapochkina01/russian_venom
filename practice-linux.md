# Работа с текстовыми данными
1) Получить информацию о HugePages из файла /proc/meminfo. (Там скорее всего будет по нулям и это норма)
2) Получить информацию о количестве ядер cpu из файла /proc/cpuinfo (строка cpu cores)
3) Получить id (3 поле в строке) пользователя www-data офильтровав содержимое файла /etc/passwd
4) Создать в домашней директории папку text_processing
5) В text_processing создать файл info.csv с таким содержимым
```
Name,Company,Price,Ganre,Multiplayer
Item1,Company1,60000$,Ganre1,Yes
Item2,Company2,70000$,Ganre2,Yes
Item3,Company3,90000$,Ganre1,Yes
Item4,Company4,90000$,Ganre1,Yes
Item5,Company5,110000$,Ganre1,Yes
Item6,Company6,410000$,Ganre2,Yes
```
6) Вывести первые две строки файла info.csv
7) Вывести стобец Price
8) Найти все строки, в которых встречается слово Ganre2
9) Найти все строки, в которых встречается слово Ganre2 и вывести для них столбец Price
10) Дозаписать в файл info.csv с помощью echo строку Item7,Company6,450000\$,Ganre1,No
11) Получить из файла /proc/cpuinfo model name
12) Скачать на машину файл [metadata.csv](https://raw.githubusercontent.com/AnastasiyaGapochkina01/vladimir/e1ab6d6982b09090d20a0ebe2a1a0db8896dacfb/metadata.csv), разместить его в text_processing
13) Вывести первые двенадцать строчки файла metadata.csv
14) Вывести последнюю строку файла metadata.csv
15) С помощью grep найти все строки, содержащие слово mutex в файле metadata.csv
16) С помощью grep найти все строки НЕ содержащие слово gauge в файле metadata.csv
17) Вывести первые 5 строк файла, а затем с помощью cut получить только первый столбец этих 5 строк
18) Вывести поле unit_name из metadata.csv (весь столбец)
19) Скачать файл [test.ns](https://raw.githubusercontent.com/AnastasiyaGapochkina01/vladimir/e1ab6d6982b09090d20a0ebe2a1a0db8896dacfb/files/test.ns), разместить его в text_processing
20) Вывести все имена в A-записях из файла test.ns
21) Скачать файл [coins](https://raw.githubusercontent.com/AnastasiyaGapochkina01/vladimir/e1ab6d6982b09090d20a0ebe2a1a0db8896dacfb/files/coins), разместить его в text_processing
22) Вывести монеты, которые чеканили из золота (gold)
23) Вывести только названия стран, которые чеканили из золота (gold)
24) Вывести монеты, которые чеканили в USA
25) Найти все вхождения www-data во всех файлах в директории /etc
26) Получить все строки, не содержащие nodev из файла /proc/filesystem
27) Выполнить команду apt list --installed; с помощью пайплайна и grep выяснить, установлен ли на машине python
28) Выполнить команду df -Th; получить из ее вывода только размер диска (или раздела), смонтированного в корень
29) Выполнить команду uptime и получить из ее вывода только значения load average
30) Выполнить команду ip -o a и получить из ее вывода только ip-адрес машины
31) В домашней директории выполнить команду find -maxdepth 1 -type f и убрать из ее вывода начальный ./
32) Выполнить команду hwclock и получить из ее вывода только дату
33) Выполнить команду lslogins и получить из ее вывода LAST-LOGIN для пользователей, у которых он есть

# Пользователи и права доступа
1) Создать группы: workers; teachers; students; вывести из файла /etc/group только названия добавленных групп
2) Создать пользователей user_{1,2,3,4,5}; вывести из файла /etc/passwd только имена созданных пользователей
3) Пользователей user_1 и user_2 добавить в группу workers
4) Пользователей user_3, user_4, user_5 добавить в группу students
5) Создать пользователя mentor3, задав ему при создании uid=3000, добавить в группу teachers
6) Вывести на экран состав групп workers; teachers; students
7) Задать пароли для всех пользователей
8) С помощью grep найти записи о новых группах и пользователях в файлах /etc/passwd и /etc/group
9) Создать директорию lab4 в домашней директории. В ней создать каталоги library и tests.
10) Создать файлы book_фамилия_{1,2,3,4,5} и поместить их в library
11) Создать текстовый файл test_фамилия, и поместить в tests; добавить в него следующий текст
```
#!/bin/bash
echo "Hello World"
```
12) Сделать файл test_фамилия исполняемым для группы students
13) Переключиться на пользователя user_3 и запустить файл test_фамилия
14) Дать право на изменение файла test_фамилия только пользователю mentor3, а на чтение пользователям группы workers; проверить что это действительно сработало, переключаясь на пользователей
15) Создать пользователя test1, для которого запрещен вход в сеанс, имеющего домашний каталог /home/nouser и являющегося членом групп user и mail. Пользователь должен иметь UID равный 2000
16) Изменить имя пользователя test1 на test123.
17) Заблокировать пользователя test123
18) Создать группу пользователей xusers с GID, равным 1010
19) Изменить имя группы на yusers, а GID на 202

# Установка ПО
1) Установить docker на ВМ
2) В домашней директории создать папку software_installation
3) В папку software_installation скачать репозиторий https://github.com/AnastasiyaGapochkina01/php53_from_source
4) Переименовать файл env.example в .env и отредактировать его, после знака = прописав имя своего пользователя
5) Выполнить по очереди
```
sudo docker compose up -d --build
export CONTAINER_NAME=$(sudo docker compose ps | awk 'NR==2{print $1}')
```
6) Подключиться к контейнеру командой
```
docker exec -it $CONTAINER_NAME /bin/bash
```
7) После подключения к контейнеру перейти в директорию /usr/src/php
8) Выполнить
```
export gnuArch="$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)"
export debMultiarch="$(dpkg-architecture --query DEB_BUILD_MULTIARCH)"
```
9) Запустить конфигуратор (./configure)
10) Выполнить сборку (make)
11) При получении ошибки - установить пакет libcurl4-gnutls-dev
12) Выполнить make install
13) Установить wget
14) Скачать .deb пакет memstat_1.1+b1_amd64.deb и установить его с помощью dpkg
15) Выполнить команду memstat
16) Установить gnupg2 и lsb-release
17) Скачать пакет percona
18) Установить его с помощью dpkg
19) Обновить пакетный индекс
20) Установить percona-server-server-5.7
21) Задача со звездочкой: собрать из исходников консольный браузер lynx

# Systemd
1) Установить на ВМ php
2) В директории /opt создать папку rot13
3) В директории /opt/rot13 создать файл с именем rot13-server.php с кодом
```
<?php
$sock = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP);
socket_bind($sock, '0.0.0.0', 10000);
for (;;) {
  socket_recvfrom($sock, $message, 1024, 0, $ip, $port);
  $reply = str_rot13($message);
  socket_sendto($sock, $reply, strlen($reply), 0, $ip, $port);
}
```
4) Запустить сервер командой php rot13-server.php и проверить что сервер работает: выполнить nc -u 127.0.0.1 10000 и ввести Hello World
5) Написать юнит-файл для запуска rot13-server.php как сервиса
6) Установить nginx, если он еще не установлен
7) Посмотреть статус демона nginx
8) Остановить nginx
9) Запустить nginx
10) Убрать nginx из автозагрузки
11) Вернуть nginx в автозагрузку
12) "Замаскировать" nginx, попробовать перезапустить/остановить/запустить nginx; снять с nginx "маскировку"
13) Установить redis ([install-redis-on-linux](https://redis.io/docs/latest/operate/oss_and_stack/install/install-redis/install-redis-on-linux/)) - ссылка доступна под VPN
14) Посмотреть статус демона redis
15) Запустить второй экземпляр демона redis, написав systemd unit

# Процессы
1) Вывести список процессов
2) Отфильтровать вывод так, чтобы осталься только процесс dockerd
3) Вывести информацию о потребляемой памяти и cpu для процесса nginx
4) Отобразить процессы только своего пользователя
5) Вывести в консоль запущенные процессы, отображая только их id, и того, от кого они запущены
6) Запустить процесс sleep 10000 в фоновом режиме
7) Вывести процесс sleep 10000 из фонового режима
8) Остановить процесс sleep 10000.
9) Вывести процессы, которые потребляют больше всех памяти
10) В директории proc найти папку, соответсвующую процессу nginx. Найти
- лимиты процесса
- какая команда запущенна в процессе
- содержимое стэка
11) Запустить top и отсортировать процессы по
- объему используемой памяти;
- времени работы
- проценту использования cpu

# Скрипты
1) Написать скрипт, который будет собирать информацию о системе и выводить ее в табличном виде:
- версия ОС
- количество ядер cpu
- размер оперативной памяти
- размер ФС, смонтированной в /
2) Написать скрипт, который будет создавать 5 пользователей:
- имена создаются по шаблону user_N_N+1, где N=2
- после создания генерируются случайные пароли и назначаются пользователям
3) Написать скрипт для автоматической установки nginx+php+mysql. Скрипт должен проверять, установилось ли ПО (хотя бы запросом версии)
4) Написать скрипт осуществляющий вывод меню, состоящего из следующих пунктов (и вывод соответствующей информации в зависимости от выбранного пункта меню. Процесс повторять до тех пор, пока не будет выбран пункт меню «выход»):
- текущий пользователь,
- объем используемой памяти,
- объем дискового пространства,
- список запущенных процессов,
- системные дата и время,
- время запуска системы
- выход

# Работа с ФС
1) Добавить к ВМ дополнительный диск
2) Установить postgresql, убедиться что он запущен
3) Выяснить, где находится директория с данными
```
sudo su - postgres
psql
# SHOW data_directory;
```
4) Вынести эту директорию на дополнительный диск без потери данных (обязательно рестартануть сервис и проверить что БД на месте)
5) Установить mongodb
6) Выяснить, где находится директория с данными
```
grep -i dbPath /etc/mongod.conf
```
7) Подключить еще один дополнительный диск к ВМ
8) Сделать из нового диска PV, из PV - VG
9) Создать Logical Volume mongo-data и вынести директорию из п6 на него
10) Убедиться, что все прошло корректно

# Сеть
1) Поднять вторую ВМ
2) Добавить дополнительный сетевой интерфейс к обеим ВМ в настройках гипервизора
3) Посмотреть информацию о сетевых устройствах на машинах
4) Настроить на обеих статические адреса из одной сети
5) Пропинговать машины и убедиться что они доступны
6) С любой из машин с помощью curl отправить запрос на stackoverflow.com
7) С помощью curl получить свой публичный ip (можно использовать ресурс 2ip.ru)
8) Установить nginx
9) Проверить, на каком порту на машине доступен установленный nginx
10) Установить на ВМ iptables и web-сервер (nginx/apache)
11) Посмотреть список правил iptables
12) Разрешить подключение к машине по портам 22 и 80 (ssh и http) для ip соседней ВМ
13) Проверить подключение
14) Запретить доступ к машине по порту 443 только для соседней машины, проверить
15) Заблокировать любой трафик от соседней машины
16) Очистить все правила
17) Запретить протокол icmp для соседней машины
